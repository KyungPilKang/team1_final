<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.finalproject.dao.MemberDAO">
		<insert id="insertMember" parameterType="Member">
		<![CDATA[
			insert into final.member(username,password,name,nickname,email,birth,age,type,phone,zipcode,doro_juso,sangse_juso,role,provider,
			provider_id,withdraw_status,withdraw_type,withdraw_contents,login_count)values(#{username},#{password},#{name},#{nickname},#{email},
			#{birth},#{age},#{type},#{phone},#{zipcode},#{doro_juso},#{sangse_juso},#{role},#{provider},#{provider_id},#{withdraw_status},#{withdraw_type},
			#{withdraw_contents},#{login_count})
		]]>
		</insert>
		
		<insert id="insertNaverMember" parameterType="Member">
		<![CDATA[
			insert into final.member(name,nickname,email,birth,age,type,phone,zipcode,doro_juso,sangse_juso,role,provider,
			provider_id,withdraw_status,withdraw_type,withdraw_contents,login_count)values(#{name},#{nickname},#{email},
			#{birth},#{age},#{type},#{phone},#{zipcode},#{doro_juso},#{sangse_juso},#{role},#{provider},#{provider_id},#{withdraw_status},#{withdraw_type},
			#{withdraw_contents},#{login_count})
		]]>
		</insert>
		
		<insert id="insertKakaoMember" parameterType="Member">
		<![CDATA[
			insert into final.member(name,nickname,email,birth,age,type,phone,zipcode,doro_juso,sangse_juso,role,provider,
			provider_id,withdraw_status,withdraw_type,withdraw_contents,login_count)values(#{name},#{nickname},#{email},
			#{birth},#{age},#{type},#{phone},#{zipcode},#{doro_juso},#{sangse_juso},#{role},#{provider},#{provider_id},#{withdraw_status},#{withdraw_type},
			#{withdraw_contents},#{login_count})
		]]>
		</insert>
		
		<select id="selectMemberByProvider_id" resultType="Member" parameterType="String">
		<![CDATA[
			select * from final.member where provider_id=#{provider_id}
		]]>
		</select>
		
		<select id="selectMemberByNo" resultType="Member" parameterType="int">
		<![CDATA[
			select * from final.member where no=#{no}
		]]>
		</select>
		
		<select id="selectMemberByEmail" resultType="Member" parameterType="String">
		<![CDATA[
			select * from final.member where email=#{email}
		]]>
		</select>
		
		<select id="selectMemberByUsername" resultType="Member" parameterType="String">
		<![CDATA[
			select * from final.member where username=#{username}
		]]>
		</select>
		
		<select id="selectMemberByNickname" resultType="Member" parameterType="String">
		<![CDATA[
			select * from final.member where nickname=#{nickname}
		]]>
		</select>

		<update id="update_login_count" parameterType="Member">
		<![CDATA[
			update final.member set login_count=#{login_count} where username = #{username}
		]]>
		</update>
		
		<update id="modifyMember" parameterType="Member">
		<![CDATA[
			update final.member set nickname=#{nickname}, email=#{email}, phone=#{phone}, zipcode=#{zipcode},
			doro_juso=#{doro_juso}, sangse_juso=#{sangse_juso} where no = #{no}
		]]>
		</update>
		
		<update id="update_password" parameterType="Member">
		<![CDATA[
			update final.member set password=#{password} where no = #{no}
		]]>
		</update>
		
		<update id="withdrawMember" parameterType="Member">
		<![CDATA[
			update final.member set username=#{username}, password=#{password}, name=#{name},
			nickname=#{nickname}, email=#{email}, phone=#{phone}, zipcode=#{zipcode},
			doro_juso=#{doro_juso}, sangse_juso=#{sangse_juso}, provider=#{provider}, provider_id=#{provider_id},
			withdraw_status=#{withdraw_status}, withdraw_type=#{withdraw_type},
			withdraw_contents=#{withdraw_contents}, withdraw_date=#{withdraw_date} where no = #{no}
		]]>
		</update>
	
</mapper>

<!-- 
CREATE TABLE IF NOT EXISTS `final`.`member` (
  `no` INT(11) NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(100) NULL DEFAULT 'NULL',
  `password` VARCHAR(1000) NULL DEFAULT NULL,
  `name` VARCHAR(100) NULL DEFAULT NULL,
  `nickname` VARCHAR(100) NULL DEFAULT NULL,
  `email` VARCHAR(100) NULL DEFAULT NULL,
  `birth` VARCHAR(100) DEFAULT NULL,
  `age` VARCHAR(100) NULL DEFAULT NULL,
  `type` VARCHAR(100) NULL DEFAULT NULL,
  `phone` VARCHAR(100) NULL DEFAULT NULL,
  `zipcode` VARCHAR(100) NULL DEFAULT NULL,
  `doro_juso` VARCHAR(100) NULL DEFAULT NULL,
  `sangse_juso` VARCHAR(100) NULL DEFAULT NULL,
  `role` VARCHAR(100) NULL DEFAULT 'ROLE_USER',
  `provider` VARCHAR(100) NULL DEFAULT NULL,
  `provider_id` VARCHAR(100) NULL DEFAULT NULL,
  `withdraw_status` VARCHAR(100) DEFAULT NULL,
  `withdraw_type` VARCHAR(100) NULL DEFAULT NULL,
  `withdraw_contents` VARCHAR(1000) NULL DEFAULT NULL,
  `login_count` int(11) DEFAULT '0',
  `withdraw_date` VARCHAR(100) DEFAULT NULL,
  PRIMARY KEY (`no`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_cimember
 -->